<!DOCTYPE html>
<html>

<head>
  <title>3D Observatory</title>
  <meta charset="utf-8" />
  <meta name="viewport"
    content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui" />
  <style>
    @-ms-viewport {
      width: device-width;
    }
  </style>
  <link rel="stylesheet" href="vendor/reset.min.css" />
  <link rel="stylesheet" href="style.css" />
</head>

<body class="multiple-scenes view-control-buttons">
  
</head>
<body>
  <div id="pano"></div>
  
  <!-- Audio element for scene sounds -->
  <audio id="audioPlayer" src=""></audio>
  
  <div id="sceneList">
    <ul class="scenes">
      <!-- replace with pvg logo -->
      <img src="/frontend/public/app-files/img/pvg_logo.png" style=" height: 2.5rem;" alt="logo">

      <!-- <select id="sceneDropdown">
          <option value="0-telescopes">Telescopes</option>
          <option value="1-observatry">Observatry</option>
          <option value="0-comp">Computer Department</option>
          <option value="2-new-home">New Home</option>
          <option value="3-dom">Dom</option>
        </select> -->

      <select id="sceneDropdown">
        <optgroup label="Campus View">
          <option value="4-checkpost">Entry</option>
          <option value="3-building-in-construction">Campus</option>
          <option value="4-building-parking">Parking</option>
          <option value="1-computerlab">Computer Department</option>
          <option value="1-entry-account-section">Account Section</option>
          <option value="1-interview-cabin-1">Interview-cabin-1</option>
        </optgroup>
      </select>

      <select id="sceneDropdown2">
        
        <optgroup label="Computer Department">
          <option value="1-computerlab">Computer Department</option>
          <option value="5-entry-principal">Entry-view</option>
          <option value="2-notice-board-admission-section-entry">Notice board</option>
          <option value="3-seminarhall">Seminar Hall</option>
        </optgroup>
        
      </select>
        <!-- <optgroup label="New Building - Ground Floor">
          <option value="new-ground-classrooms">Computer Dept</option>
          <option value="new-ground-computer">Computer Center (007)</option>
          <option value="new-ground-mechanical">Mechanical Department</option>
          <option value="new-ground-seminar">Seminar Hall (016)</option>
          <option value="new-ground-account">Account Section (A1)</option>
          <option value="new-ground-principal">Principal Office (A3)</option>
          <option value="new-ground-tpo">TPO Office (A6)</option>
          <option value="new-ground-director">Director Office (A4)</option>
          <option value="new-ground-student">Student Section (A7)</option>
        </optgroup>
        <optgroup label="New Building - Basement">
          <option value="new-basement-aids">AIDS HOD (B1)</option>
          <option value="new-basement-ai">
            Artificial Intelligence Lab (B2)
          </option>
          <option value="new-basement-cloud">Cloud Computing Lab (B3)</option>
        </optgroup>
        <optgroup label="Old Building - Ground Floor">
          <option value="old-ground-medical">Medical Room</option>
          <option value="old-ground-nss">NSS SDO Office</option>
          <option value="old-ground-sports">Sports Room</option>
          <option value="old-ground-computerlab1">Computer Lab 1</option>
          <option value="old-ground-workshop">Workshop</option>
        </optgroup>
        <optgroup label="Old Building - 1st Floor">
          <option value="old-first-computerlab">Computer Lab</option>
          <option value="old-first-tutorial">Tutorial Room</option>
          <option value="old-first-mba">MBA Staff Room</option>
          <option value="old-first-seminar">Seminar Hall</option>
        </optgroup>
        <optgroup label="Old Building - 2nd Floor">
          <option value="old-second-hardware">Hardware Lab</option>
          <option value="old-second-project">Project Lab (IT)</option>
          <option value="old-second-incubation">Incubation Center</option>
        </optgroup>
        <optgroup label="Premises Spots">
          <option value="premises-360view">360Â° View of Whole Campus</option>
          <option value="premises-entry">Entry Gate</option>
          <option value="premises-oldentrance">Old Building Entrance</option>
          <option value="premises-ground">Ground</option>
          <option value="premises-shadeparking">Shade Parking</option>
          <option value="premises-exam">Exam Centre Parking</option>
          <option value="premises-canteen">Canteen</option>
          <option value="premises-bike">Bike Parking</option>
          <option value="premises-office">Office Entrance</option>
          <option value="premises-aids">AIDS Department Entrance</option>
        </optgroup> -->

        <a href="../app-files/event-auth.html">
          <button class="event-btn mx-3">Event</button>
        </a>
        <a href="https://www.pvgcoenashik.org/">
          <button class="collegebtn mx-3">Our College</button>
        </a>
        <a href="AboutUs/about.html">
          <button class="collegebtn mx-3">About Us</button>
        </a>
        <a href="/frontend/public/app-files/Contact/index.html">
          <button class="collegebtn mx-3">Contact Us</button>
        </a>

      <a href="javascript:void(0)" class="scene" data-id="0-computer-lab">
        <!-- <li class="text">computer-lab</li> -->
      </a>

      <a href="javascript:void(0)" class="scene" data-id="2-building-in-construction">
      </a>

      <a href="javascript:void(0)" class="scene" data-id="4-entry-principal">
      </a>

      <a href="javascript:void(0)" class="scene" data-id="1-entry-account-section">
      </a>

      <a href="javascript:void(0)" class="scene" data-id="3-library-2-1">
      </a>

      <a href="javascript:void(0)" class="scene" data-id="0-telescopes">
        <!-- <li class="text">Telescopes</li> -->
      </a>

      <a href="javascript:void(0)" class="scene" data-id="0-comp">
        <!-- <li class="text">Telescopes</li> -->
      </a>

      <a href="javascript:void(0)" class="scene" data-id="1-classroom">
        <!-- <li class="text">Telescopes</li> -->
      </a>

      <a href="javascript:void(0)" class="scene" data-id="0-library"> </a>

      <a href="javascript:void(0)" class="scene" data-id="1-observatry">
        <!-- <li class="text">Observatry</li> -->
      </a>

      <a href="javascript:void(0)" class="scene" data-id="2-new-home">
        <!-- <li class="text">new home</li> -->
      </a>

      <a href="javascript:void(0)" class="scene" data-id="3-dom">
        <!-- <li class="text">dom</li> -->
      </a>

      <a href="javascript:void(0)" class="scene" data-id="0-entries">
        <!-- <li class="text">entries</li> -->
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="1-interview-cabin-1">
        <!-- <li class="text">Interview-cabin-1</li> -->
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="2-notice-board-admission-section-entry">
        <!-- <li class="text">notice-board-admission-section-entry</li> -->
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="3-building-in-construction">
        <!-- <li class="text">building-in-construction</li> -->
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="4-building-parking">
        <!-- <li class="text">building-parking</li> -->
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="5-entry-principal">
        <!-- <li class="text">entry-principal</li> -->
      </a>

      <a href="javascript:void(0)" class="scene" data-id="0-building-side-view">
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="1-computerlab">
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="2-classroom">
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="3-seminarhall">
      </a>
    
      <a href="javascript:void(0)" class="scene" data-id="4-checkpost">
      </a>
      
    </ul>
  </div>

  <!-- <div id="titleBar">
    <h1 class="sceneName"></h1>
  </div> -->

  <a href="javascript:void(0)" id="autorotateToggle">
    <img class="icon off" src="img/play.png" />
    <img class="icon on" src="img/pause.png" />
    <img src="./img/exit.png" alt="Exit" class="exit-arrow" id="exitArrow" />
  </a>

  <a href="javascript:void(0)" id="fullscreenToggle">
    <img class="icon off" src="img/fullscreen.png" />
    <img class="icon on" src="img/windowed.png" />
  </a>

  <a href="javascript:void(0)" id="sceneListToggle">
    <!-- <img class="icon off" src="img/expand.png" /> -->
    <!-- <img class="icon on" src="img/collapse.png" /> -->
  </a>

  <nav class="bottom-buttons">
    <a href="javascript:void(0)" id="viewUp" class="viewControlButton viewControlButton-1">
      <img class="icon" src="img/up arrow.png" />
    </a>
    <a href="javascript:void(0)" id="viewDown" class="viewControlButton viewControlButton-2">
      <img class="icon" src="img/down arrow.png" />
    </a>
    <a href="javascript:void(0)" id="viewLeft" class="viewControlButton viewControlButton-3">
      <img class="icon" src="img/left arrow.png" />
    </a>
    <a href="javascript:void(0)" id="viewRight" class="viewControlButton viewControlButton-4">
      <img class="icon" src="img/right arrow.png" />
    </a>
    <a href="javascript:void(0)" id="viewIn" class="viewControlButton viewControlButton-5">
      <img class="icon" src="img/plus-icon.png" />
    </a>
    <a href="javascript:void(0)" id="viewOut" class="viewControlButton viewControlButton-6">
      <img class="icon" src="img/minus-icon.png" />
    </a>

    <!-- vr logo -->
    <a href="javascript:void(0)" id="viewOut" class="viewControlButton viewControlButton-7">
      <img class="icon" src="img/vr.png" />
    </a>
  </nav>

    <!-- Chatbot Icon -->
<div class="chatbot-icon" id="chatbotIcon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-robot" viewBox="0 0 16 16">
  <path d="M6 12.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5M3 8.062C3 6.76 4.235 5.765 5.53 5.886a26.6 26.6 0 0 0 4.94 0C11.765 5.765 13 6.76 13 8.062v1.157a.93.93 0 0 1-.765.935c-.845.147-2.34.346-4.235.346s-3.39-.2-4.235-.346A.93.93 0 0 1 3 9.219zm4.542-.827a.25.25 0 0 0-.217.068l-.92.9a25 25 0 0 1-1.871-.183.25.25 0 0 0-.068.495c.55.076 1.232.149 2.02.193a.25.25 0 0 0 .189-.071l.754-.736.847 1.71a.25.25 0 0 0 .404.062l.932-.97a25 25 0 0 0 1.922-.188.25.25 0 0 0-.068-.495c-.538.074-1.207.145-1.98.189a.25.25 0 0 0-.166.076l-.754.785-.842-1.7a.25.25 0 0 0-.182-.135"/>
  <path d="M8.5 1.866a1 1 0 1 0-1 0V3h-2A4.5 4.5 0 0 0 1 7.5V8a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1v-.5A4.5 4.5 0 0 0 10.5 3h-2zM14 7.5V13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.5A3.5 3.5 0 0 1 5.5 4h5A3.5 3.5 0 0 1 14 7.5"/>
</svg></div>

<!-- Chat Popup -->
<div class="chat-popup" id="chatPopup">
  <div class="chat-header">Ask your doubt</div>
  <div class="chat-body" id="chatBody">
    <!-- Chat messages will appear here -->
  </div>
  <div class="chat-input">
    <input type="text" id="chatInput" placeholder="Type your question..." class="form-control" />
    <button id="sendBtn">Send</button>
  </div>
</div>

  <script src="vendor/screenfull.min.js"></script>
  <script src="vendor/bowser.min.js"></script>
  <script src="vendor/marzipano.js"></script>

  <script src="data.js"></script>
  <script src="index.js"></script>

  <script>
    document
      .getElementById("exitArrow")
      .addEventListener("click", function () {
        // If there's a previous page in history, go back.
        if (history.length > 2) {
          history.back();
        } else {
          // Otherwise, redirect to a fallback page.
          window.location.href = "index.html";
        }
      });

      //audio
      let dropdown = document.getElementById("sceneDropdown");
      let audioPlayer = document.getElementById("audioPlayer");

      dropdown.addEventListener("change", function () {
        let selectedValue = dropdown.value; // Get selected value
        let audioSrc = "audio/scene1.mp3"; // Default empty audio source

        // Use switch case to assign the correct audio file
        switch (selectedValue) {
          case "3-building-in-construction":
            audioSrc = "audio/Ourcampus.mp3";
            break;
          case "0-computer-lab":
            audioSrc = "audio/computerlab.mp3";
            break;
          case "4-building-parking":
            audioSrc = "audio/parking.mp3";
            break;
          case "2-notice-board-admission-section-entry":
            audioSrc = "audio/CentralEnterance.mp3";
            break;
          case "1-entry-account-section":
            audioSrc = "audio/accountsection.mp3";
            break;
          case "1-interview-cabin-1":
            audioSrc = "audio/interviewCabin.mp3";
            break;
          case "5-entry-principal":
            audioSrc = "audio/CentralEnterance.mp3";
            break;
          case "5-entry-principal":
            audioSrc = "audio/CentralEnterance.mp3";
            break;
          default:
            audioSrc = ""; // No valid selection
        }

        if (audioSrc) {
          audioPlayer.src = audioSrc;
          audioPlayer.load(); // Ensure the audio file is loaded
          audioPlayer
            .play()
            .catch((error) => console.log("Autoplay blocked:", error));
        } else {
          audioPlayer.pause();
          audioPlayer.currentTime = 0;
        }
      });

      // Toggle chat popup visibility
const chatbotIcon = document.getElementById('chatbotIcon');
const chatPopup = document.getElementById('chatPopup');
const sendBtn = document.getElementById('sendBtn');
const chatInput = document.getElementById('chatInput');
const chatBody = document.getElementById('chatBody');

chatbotIcon.addEventListener('click', () => {
  chatPopup.style.display = chatPopup.style.display === 'flex' ? 'none' : 'flex';
});

// Predefined Q&A pairs (add your 20 questions and answers here)
const qaPairs = {
  "Where is PVG Nashik located?": "206, Behind Reliance Petrol Pump, Dindori Road, Mhasrul, Nashik â 422004, Maharashtra, India.",
  "When was PVG Nashik established?": "Established in 2010.",
  "Which university is PVG Nashik affiliated with?": "Affiliated with Savitribai Phule Pune University.",
  "Is PVG Nashik AICTE approved?": "Yes, approved by AICTE, New Delhi.",
  "What undergraduate courses are offered?": "B.E. in Mechanical, Computer, IT, E&TC, and AI & DS.",
  "Does PVG Nashik offer an MBA program?": "Yes, MBA is available.",
  "What is the campus size?": "The campus spans over 20 acres in Mhasrul, Nashik.",
  "Does the college have a library?": "Yes, with a vast collection of books and digital resources.",
  "Are there hostel facilities?": "Hostel facility details are not provided.",
  "Is there a gym on campus?": "Yes, gym facilities are available.",
  "Does PVG have Wi-Fi?": "Yes, the campus has excellent Wi-Fi connectivity.",
  "How is the placement record?": "The college has a consistent 100% placement record.",
  "Which companies visit for placements?": "Companies like Bajaj Finserv, ICICI Securities, Hexaware, and Winjit.",
  "What is the dress code for students?": "Students must wear a yellow shirt and black trousers.",
  "What are the attendance requirements?": "A minimum of 75% attendance is mandatory.",
  "How can I contact the college?": "Call 0253-6480036 or email pvgcoenashik@gmail.com.",
  "What is the official website?": "https://www.pvgcoenashik.org/",
  "Does PVG Nashik have social media?": "Yes, on Facebook and LinkedIn.",
  "Are there clubs and societies?": "Yes, various technical and cultural clubs are available.",
  "Does the college host events?": "Yes, workshops, seminars, and cultural events are held.",
  "What MBA specializations are available?": "Finance, Marketing, HR, Operations, and Business Analytics.",
  "Is there a student code of conduct?": "Yes, including dress code and attendance policies.",
  "Does the college offer distance education?": "No details available.",
  "Are there sports facilities?": "No specific details available.",
  "Is there a student union?": "No details available.",
  "What is the student-to-teacher ratio?": "Not specified.",
  "Are there canteen facilities?": "Not mentioned.",
  "Does PVG Nashik offer scholarships?": "No specific details available.",
  "What are the admission requirements?": "Based on MHT CET or JEE Main.",
  "Is there a placement cell?": "Yes, ensuring 100% placements.",
  "Are internships available?": "Not specified.",
  "Does the college offer career counseling?": "Not mentioned.",
  "What is the fee structure?": "Not provided.",
  "Are education loans available?": "No details available.",
  "What are the admission deadlines?": "Not specified.",
  "Is lateral entry available?": "Not mentioned.",
  "Is the campus safe?": "No specific details available.",
  "Are there medical facilities?": "Not mentioned.",
  "Is there an alumni network?": "Not specified.",
  "Are networking events held?": "No details available.",
  "Can I take a virtual tour?": "Not mentioned.",
  "How can I get more information?": "Visit the official website or contact the college.",
   "Hi": "Hello! How can I assist you today?",
  "Hello": "Hi there! What do you need help with?",
  "Hey": "Hey! How can I help?",
  "Good morning": "Good morning! What would you like to know?",
  "Good afternoon": "Good afternoon! How can I assist you?",
  "Good evening": "Good evening! How can I help?",
  "How are you?": "I'm just a chatbot, but I'm here to assist you!",
  "What is your name?": "I'm your virtual assistant, here to help!",
  "What can you do?": "I can answer questions about the college, admission, events, and more!",
  
  // Admission-related queries
  "What are the admission requirements?": "You need to submit your academic records, ID proof, and complete the entrance test if required.",
  "Is there an entrance exam?": "Yes, some courses require an entrance ex am. Please check the admission guidelines.",
  "What is the last date to apply?": "The last date for applications varies by course. Please check the official website for details.",
  "Can I apply offline?": "No, all applications must be submitted online through our portal.",
  
  // Fees & Scholarship Queries
  "What is the tuition fee?": "The tuition fee depends on the course. Please check the website for detailed fee structures.",
  "Are there any scholarships available?": "Yes, we offer merit-based and need-based scholarships.",
  "How can I apply for a scholarship?": "You can apply for scholarships during the admission process by submitting the required documents.",
  
  // Facilities & Campus Life
  "Is there a hostel facility?": "Yes, we provide hostel accommodation for students.",
  "Are there sports facilities?": "Yes, we have a sports complex with various indoor and outdoor sports.",
  "Does the campus have WiFi?": "Yes, our campus provides free WiFi for students.",
  "Where is the cafeteria?": "The cafeteria is located near the main building.",
  
  // Exams & Academics
  "When do exams start?": "Exam dates are announced on the academic calendar. Please check the website.",
  "How can I get my exam schedule?": "The exam schedule is available on the student portal.",
  "What is the grading system?": "We follow a CGPA-based grading system.",
  
  // Events & Activities
  "Are there cultural events?": "Yes, we organize annual cultural and technical festivals.",
  "How can I join clubs?": "You can sign up for clubs at the student activity center.",
  
  // Contact & Support
  "How can I contact the college office?": "You can reach us via email or visit the administration office.",
  "Where can I find my student ID?": "You can get your student ID from the student affairs department."
};

/* --- Fuzzy Matching Functions --- */

// Levenshtein distance algorithm to compute edit distance between two strings
function levenshteinDistance(a, b) {
  const matrix = [];

  // Increment along the first column of each row
  for (let i = 0; i <= b.length; i++) {
      matrix[i] = [i];
  }

  // Increment each column in the first row
  for (let j = 0; j <= a.length; j++) {
      matrix[0][j] = j;
  }

  // Fill in the rest of the matrix
  for (let i = 1; i <= b.length; i++) {
      for (let j = 1; j <= a.length; j++) {
          if (b.charAt(i - 1) === a.charAt(j - 1)) {
              matrix[i][j] = matrix[i - 1][j - 1];
          } else {
              matrix[i][j] = Math.min(
                  matrix[i - 1][j - 1] + 1, // substitution
                  matrix[i][j - 1] + 1,     // insertion
                  matrix[i - 1][j] + 1      // deletion
              );
          }
      }
  }
  return matrix[b.length][a.length];
}

// Function to get a similarity score between 0 and 1
function getSimilarity(a, b) {
  const distance = levenshteinDistance(a, b);
  return 1 - distance / Math.max(a.length, b.length);
}

// Enhanced getBotResponse using fuzzy matching
function getBotResponse(userInput) {
  let bestMatch = null;
  let bestScore = 0;

  // Compare user input with each predefined question
  for (let question in qaPairs) {
      const score = getSimilarity(userInput.toLowerCase(), question.toLowerCase());
      if (score > bestScore) {
          bestScore = score;
          bestMatch = question;
      }
  }

  // If the best match score is above a threshold (e.g., 0.5), return its answer
  if (bestScore >= 0.5) {
      return qaPairs[bestMatch];
  }
  return "I'm sorry, I don't understand that. Could you please ask a different question?";
}

// Append messages to the chat body
function appendMessage(sender, text) {
  const messageDiv = document.createElement('div');
  messageDiv.classList.add('message', sender === 'user' ? 'user-msg' : 'bot-msg');
  messageDiv.textContent = text;
  chatBody.appendChild(messageDiv);
  chatBody.scrollTop = chatBody.scrollHeight;
}

// Send button click event handler
sendBtn.addEventListener('click', () => {
  const userText = chatInput.value.trim();
  if (userText === "") return;

  // Append user message
  appendMessage('user', userText);

  // Get bot response using fuzzy matching logic
  const botResponse = getBotResponse(userText);

  // Simulate a small delay for a natural feel
  setTimeout(() => {
    appendMessage('bot', botResponse);
  }, 500);

  // Clear input field
  chatInput.value = "";
});

// Allow sending messages via the Enter key
chatInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') {
    sendBtn.click();
  }
});

  </script>

</body>

</html>